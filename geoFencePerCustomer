{
  "metadata": {
    "infoBoxes": [
      {
        "x": 163,
        "y": 131,
        "text": "<h2>README FIRST</h2>\nyou need to start this template in reactive mode\nwith resetObservation flag set to false\n"
      },
      {
        "x": 407,
        "y": 558,
        "text": "In case you want to use the customer in the filter\nyou can use information from the metadata."
      },
      {
        "x": 783,
        "y": 494,
        "text": "Provides list of geofence locations used by\ngeofence sensor. You need to provide \nresourecTypeid which is the list of geofences \n(resource group). \nEach geofence is one resource.\n\nIf the input is not coming from meta, you can as \nwell remove getMetaData node, and just add \nresourceTypeId and/or customer yourself. "
      }
    ]
  },
  "posterior": [],
  "nodes": [
    {
      "states": [
        "IN",
        "OUT"
      ],
      "name": "genericGeoFence_1",
      "properties": {
        "position": [
          233,
          227
        ],
        "tickTrigger": true,
        "dataTrigger": true,
        "cost": 1,
        "resource": "$",
        "sensor": {
          "name": "genericGeoFence",
          "version": "1.0.9",
          "label": "genericGeoFence_1",
          "requiredProperties": [
            {
              "locations": "getGeoFenceListForType_1.locations"
            }
          ]
        },
        "actions": [
          {
            "name": "waylayCloudCacheStore",
            "version": "1.3.4",
            "label": "InEvent",
            "position": [
              486,
              101
            ],
            "requiredProperties": [
              {
                "payload": "{ \n    \"alarm_type\" : \"IN\",\n    \"markerIcon\": \"ion-cube\",    \n    \"markerColor\": \"blue\",\n    \"latitude\": \"<genericGeoFence_1.latitude>\",\n    \"longitude\": \"<genericGeoFence_1.longitude>\"\n}"
              },
              {
                "domain": ""
              },
              {
                "forward": ""
              },
              {
                "store": ""
              },
              {
                "resource": ""
              }
            ],
            "triggeredStates": [],
            "actionPolicy": 0,
            "nodeTrigger": {
              "stateFrom": "*",
              "stateTo": "IN"
            }
          },
          {
            "name": "waylayCloudCacheStore",
            "version": "1.3.4",
            "label": "OutEvent",
            "position": [
              510,
              217
            ],
            "requiredProperties": [
              {
                "payload": "{ \n    \"alarm_type\" : \"OUT\",\n    \"markerIcon\": \"ion-cube\",    \n    \"markerColor\": \"red\",\n    \"latitude\": \"<genericGeoFence_1.latitude>\",\n    \"longitude\": \"<genericGeoFence_1.longitude>\"\n}"
              },
              {
                "domain": ""
              },
              {
                "forward": ""
              },
              {
                "store": ""
              },
              {
                "resource": ""
              }
            ],
            "triggeredStates": [],
            "actionPolicy": 0,
            "nodeTrigger": {
              "stateFrom": "*",
              "stateTo": "OUT"
            }
          },
          {
            "name": "waylayUpdateMetadata",
            "version": "0.0.2",
            "label": "updateMetaForMap",
            "position": [
              483,
              322
            ],
            "requiredProperties": [
              {
                "domain": ""
              },
              {
                "resource": ""
              },
              {
                "payload": "{ \n    \"site\" : \"<genericGeoFence_1.location.name>\",\n    \"latitude\": \"<genericGeoFence_1.latitude>\",\n    \"longitude\": \"<genericGeoFence_1.longitude>\"\n}"
              }
            ],
            "triggeredStates": [
              "IN",
              "OUT"
            ],
            "actionPolicy": 0
          }
        ]
      },
      "type": "discrete",
      "mode": "nature",
      "priors": [
        0.5,
        0.5
      ]
    },
    {
      "states": [
        "Found",
        "Not Found"
      ],
      "name": "getGeoFenceListForType_1",
      "properties": {
        "position": [
          682,
          524
        ],
        "nodeTrigger": {
          "nodeName": "waylayGetMetadata_1",
          "stateFrom": "*",
          "stateTo": "Collected",
          "states": []
        },
        "tickTrigger": true,
        "dataTrigger": true,
        "cost": 1,
        "sensor": {
          "name": "getGeoFenceListForType",
          "version": "0.0.5",
          "label": "getGeoFenceListForType_1",
          "requiredProperties": [
            {
              "resourceTypeId": ""
            },
            {
              "customer": ""
            }
          ]
        }
      },
      "type": "discrete",
      "mode": "nature",
      "priors": [
        0.5,
        0.5
      ]
    },
    {
      "states": [
        "Collected",
        "Not Collected"
      ],
      "name": "waylayGetMetadata_1",
      "properties": {
        "position": [
          452,
          606
        ],
        "tickTrigger": true,
        "dataTrigger": true,
        "cost": 1,
        "resource": "$",
        "sensor": {
          "name": "waylayGetMetadata",
          "version": "0.0.3",
          "label": "waylayGetMetadata_1",
          "requiredProperties": [
            {
              "resource": ""
            },
            {
              "domain": ""
            }
          ]
        },
        "actions": [
          {
            "name": "debugDialog",
            "version": "1.0.4",
            "label": "debugMeta",
            "position": [
              707,
              689
            ],
            "requiredProperties": [
              {
                "message": "{{waylayGetMetadata_1.customer}}"
              }
            ],
            "triggeredStates": [
              "Collected"
            ],
            "actionPolicy": 0
          }
        ]
      },
      "type": "discrete",
      "mode": "nature",
      "priors": [
        0.5,
        0.5
      ]
    }
  ],
  "name": "geoFencePerCustomer"
}
